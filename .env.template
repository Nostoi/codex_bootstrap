# ===================================================================
# Helmsman AI-Augmented Task Management - Environment Configuration
# ===================================================================
# 
# Complete environment template for all deployment scenarios
# Copy to .env for local development and customize as needed
#

# ===================================================================
# CORE APPLICATION SETTINGS
# ===================================================================

# Database Configuration
# PostgreSQL (Recommended for production)
DATABASE_URL="postgresql://codex:codex@localhost:5487/codex_bootstrap?schema=public"
# SQLite (Development only - uncomment to use instead of PostgreSQL)
# DATABASE_URL="file:./backend/dev.db"

# Server Configuration
PORT=8000
CORS_ORIGIN="http://localhost:3333"
ADDITIONAL_CORS_ORIGINS="https://yourdomain.com,https://api.yourdomain.com"
API_VERSION="1.0.0"

# WebSocket Configuration
COLLABORATION_PORT=8001
WEBSOCKET_URL="ws://localhost:8001"

# ===================================================================
# AUTHENTICATION & SECURITY
# ===================================================================

# JWT Configuration
JWT_SECRET="development_secret_change_in_production_minimum_32_chars"
JWT_EXPIRES_IN="15m"
REFRESH_TOKEN_EXPIRES_IN="7d"

# Encryption Key (64 characters required for AES-256)
ENCRYPTION_KEY="your_64_character_encryption_key_here_change_in_production_abc123"

# Google OAuth2 Configuration
GOOGLE_CLIENT_ID="your_google_client_id"
GOOGLE_CLIENT_SECRET="your_google_client_secret"
GOOGLE_REDIRECT_URI="http://localhost:3333/auth/google/callback"

# Microsoft Graph OAuth2 Configuration
MICROSOFT_CLIENT_ID="your_microsoft_client_id"
MICROSOFT_CLIENT_SECRET="your_microsoft_client_secret"
MICROSOFT_REDIRECT_URI="http://localhost:3333/auth/microsoft/callback"
# Optional: Specify tenant ID for single-tenant apps (recommended for production)
# MICROSOFT_TENANT_ID="your_tenant_id"

# Session Storage
REDIS_URL="redis://localhost:6379"
REDIS_PASSWORD=""
REDIS_DB=0

# ===================================================================
# AI SERVICES CONFIGURATION  
# ===================================================================

# OpenAI Configuration
OPENAI_API_KEY="your_openai_api_key_here"
OPENAI_MODEL="gpt-4"
OPENAI_MAX_TOKENS=2000
OPENAI_TEMPERATURE=0.3

# Mem0 Semantic Memory (Optional - Advanced AI features)
MEM0_API_KEY="your_mem0_api_key_here"
MEM0_USER_ID="default_user"
MEM0_CONFIG_PATH="./config/mem0-config.json"

# ===================================================================
# FEATURE FLAGS
# ===================================================================
# Control feature availability across environments
# Set to true/false to enable/disable features globally

# Core Features (Production Ready)
FF_ENHANCED_TASK_METADATA=true
FF_AI_TASK_EXTRACTION=true
FF_DAILY_PLANNING=true
FF_OAUTH_AUTHENTICATION=true
FF_WEBSOCKET_NOTIFICATIONS=true

# Advanced Features (Beta/Development)
FF_MEM0_INTEGRATION=false
FF_ADVANCED_AI_FEATURES=false
FF_COLLABORATIVE_EDITING=false
FF_EMAIL_INTEGRATION=false
FF_PERFORMANCE_MONITORING=true

# Integration Features
FF_GOOGLE_CALENDAR_SYNC=true
FF_MICROSOFT_CALENDAR_SYNC=true
FF_GMAIL_INTEGRATION=false
FF_OUTLOOK_EMAIL_INTEGRATION=false

# ===================================================================
# MONITORING & OBSERVABILITY
# ===================================================================

# Logging Configuration
LOG_LEVEL="info"
LOG_FORMAT="json"
AUDIT_LOG_RETENTION_DAYS=90
AUDIT_LOG_DIR="./logs/audit"

# Application Monitoring
ENABLE_METRICS=true
METRICS_PORT=9090
PROMETHEUS_ENDPOINT="/metrics"

# Error Tracking (Optional)
SENTRY_DSN=""
SENTRY_ENVIRONMENT="development"

# Performance Monitoring
ENABLE_PERFORMANCE_TRACKING=true
PERFORMANCE_SAMPLE_RATE=0.1

# ===================================================================
# FRONTEND CONFIGURATION
# ===================================================================

# Next.js Public Variables (Accessible in browser)
NEXT_PUBLIC_API_URL="http://localhost:8222"
NEXT_PUBLIC_WEBSOCKET_URL="ws://localhost:8001"
NEXT_PUBLIC_APP_NAME="Helmsman"
NEXT_PUBLIC_APP_VERSION="1.0.0"
NEXT_PUBLIC_APP_DESCRIPTION="AI-Augmented Task Management for ADHD"

# Development Settings
NEXT_PUBLIC_DEBUG=false
NEXT_PUBLIC_ENABLE_STORYBOOK=true
NEXT_PUBLIC_ENABLE_DEVTOOLS=true

# Analytics & Tracking (Optional)
NEXT_PUBLIC_GOOGLE_ANALYTICS_ID=""
NEXT_PUBLIC_HOTJAR_ID=""

# ===================================================================
# DEVELOPMENT & TESTING
# ===================================================================

# Development Mode Settings
NODE_ENV="development"
NEXT_TELEMETRY_DISABLED=1

# Testing Configuration
TEST_DATABASE_URL="file:./test.db"
TEST_REDIS_URL="redis://localhost:6380"
E2E_BASE_URL="http://localhost:3333"
E2E_API_URL="http://localhost:8222"

# Mock Services (Development)
MOCK_OPENAI_RESPONSES=false
MOCK_CALENDAR_APIS=false
MOCK_EMAIL_APIS=false

# ===================================================================
# INFRASTRUCTURE & DEPLOYMENT
# ===================================================================

# Container Configuration
CONTAINER_REGISTRY="ghcr.io/your-org/helmsman"
IMAGE_TAG="latest"

# Health Check Configuration
HEALTH_CHECK_TIMEOUT=30000
HEALTH_CHECK_INTERVAL=60000

# Database Connection Pool
DATABASE_POOL_SIZE=10
DATABASE_CONNECTION_TIMEOUT=30000

# Rate Limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_SKIP_FAILED_REQUESTS=true

# ===================================================================
# PRODUCTION OVERRIDES
# ===================================================================
# Uncomment and customize for production deployment

# Production Security
# JWT_SECRET="production_jwt_secret_minimum_256_bits_entropy"
# ENCRYPTION_KEY="production_encryption_key_64_characters_aes256_compliant"
# REDIS_PASSWORD="production_redis_password"

# Production Database
# DATABASE_URL="postgresql://username:password@production-db:5432/helmsman"

# Production APIs
# NEXT_PUBLIC_API_URL="https://api.yourdomain.com"
# NEXT_PUBLIC_WEBSOCKET_URL="wss://api.yourdomain.com"

# Production Monitoring
# SENTRY_DSN="https://your-sentry-dsn@sentry.io/project-id"
# SENTRY_ENVIRONMENT="production"

# ===================================================================
# KUBERNETES DEPLOYMENT
# ===================================================================
# Used by Kubernetes manifests and Helm charts

# Namespace
K8S_NAMESPACE="helmsman"

# Service Configuration
K8S_BACKEND_SERVICE_PORT=8000
K8S_FRONTEND_SERVICE_PORT=3000
K8S_WEBSOCKET_SERVICE_PORT=8001

# Resource Limits
K8S_BACKEND_CPU_LIMIT="500m"
K8S_BACKEND_MEMORY_LIMIT="512Mi"
K8S_FRONTEND_CPU_LIMIT="200m"
K8S_FRONTEND_MEMORY_LIMIT="256Mi"

# Auto-scaling
K8S_MIN_REPLICAS=2
K8S_MAX_REPLICAS=10
K8S_TARGET_CPU_UTILIZATION=70

# ===================================================================
# CALENDAR INTEGRATION SETTINGS
# ===================================================================

# Google Calendar API
GOOGLE_CALENDAR_SCOPES="https://www.googleapis.com/auth/calendar.readonly,https://www.googleapis.com/auth/calendar.events"
GOOGLE_CALENDAR_BATCH_SIZE=50
GOOGLE_CALENDAR_SYNC_INTERVAL=300000

# Microsoft Graph Calendar API  
MICROSOFT_GRAPH_SCOPES="https://graph.microsoft.com/calendars.read,https://graph.microsoft.com/calendars.readwrite"
MICROSOFT_GRAPH_BATCH_SIZE=50
MICROSOFT_GRAPH_SYNC_INTERVAL=300000

# Calendar Sync Configuration
CALENDAR_SYNC_LOOKBACK_DAYS=30
CALENDAR_SYNC_LOOKAHEAD_DAYS=90
CALENDAR_CONFLICT_DETECTION=true

# ===================================================================
# EMAIL INTEGRATION SETTINGS (Beta)
# ===================================================================

# Gmail API Configuration
GMAIL_SCOPES="https://www.googleapis.com/auth/gmail.readonly"
GMAIL_BATCH_SIZE=25
GMAIL_SYNC_INTERVAL=600000

# Outlook Email API Configuration  
OUTLOOK_EMAIL_SCOPES="https://graph.microsoft.com/mail.read"
OUTLOOK_EMAIL_BATCH_SIZE=25
OUTLOOK_EMAIL_SYNC_INTERVAL=600000

# Email Processing
EMAIL_TASK_EXTRACTION_ENABLED=false
EMAIL_CONTENT_RETENTION_DAYS=30
EMAIL_ATTACHMENT_PROCESSING=false

# ===================================================================
# ADVANCED AI CONFIGURATION
# ===================================================================

# Task Classification Settings
AI_CLASSIFICATION_CONFIDENCE_THRESHOLD=0.7
AI_CLASSIFICATION_BATCH_SIZE=10

# Daily Planning Algorithm
PLANNING_ALGORITHM_VERSION="v2"
PLANNING_OPTIMIZATION_TIMEOUT=30000
PLANNING_MAX_TASKS_PER_DAY=20

# AI Response Configuration
AI_RESPONSE_TIMEOUT=30000
AI_RETRY_ATTEMPTS=3
AI_BACKOFF_MULTIPLIER=2

# ===================================================================
# WEBHOOKS & INTEGRATIONS
# ===================================================================

# Webhook Configuration
WEBHOOK_SECRET="your_webhook_secret_here"
WEBHOOK_TIMEOUT=15000

# External Integrations
SLACK_WEBHOOK_URL=""
DISCORD_WEBHOOK_URL=""
TEAMS_WEBHOOK_URL=""

# ===================================================================
# BACKUP & DISASTER RECOVERY
# ===================================================================

# Database Backup Configuration
BACKUP_ENABLED=false
BACKUP_INTERVAL="0 2 * * *"
BACKUP_RETENTION_DAYS=30
BACKUP_STORAGE_PATH="./backups"

# File Storage Configuration
FILE_STORAGE_PROVIDER="local"
FILE_STORAGE_PATH="./uploads"
FILE_MAX_SIZE="10MB"

# ===================================================================
# PERFORMANCE TUNING
# ===================================================================

# HTTP Configuration
HTTP_TIMEOUT=30000
HTTP_KEEP_ALIVE_TIMEOUT=5000
HTTP_MAX_CONNECTIONS=1000

# Cache Configuration
CACHE_TTL=3600000
CACHE_MAX_KEYS=10000
CACHE_COMPRESSION=true

# Static Asset Configuration
STATIC_CACHE_TTL=86400000
CDN_URL=""

# ===================================================================
# COMPLIANCE & PRIVACY
# ===================================================================

# GDPR Compliance
DATA_RETENTION_DAYS=2555
USER_DATA_EXPORT_ENABLED=true
USER_DATA_DELETE_ENABLED=true

# Privacy Settings
ANALYTICS_CONSENT_REQUIRED=true
COOKIE_CONSENT_REQUIRED=true
TRACKING_CONSENT_REQUIRED=true

# ===================================================================
# ENVIRONMENT-SPECIFIC NOTES
# ===================================================================

# Development:
# - Use SQLite for quick setup: DATABASE_URL="file:./backend/dev.db"  
# - Enable debug flags: NEXT_PUBLIC_DEBUG=true
# - Use mock services to avoid API costs during development

# Staging:
# - Use production-like database: PostgreSQL
# - Enable all feature flags for testing
# - Use real API credentials but with test accounts

# Production:  
# - Strong secrets: Generate cryptographically secure JWT_SECRET and ENCRYPTION_KEY
# - Redis session storage: Configure REDIS_URL with authentication
# - Monitoring: Enable SENTRY_DSN and performance tracking
# - Security: Set proper CORS origins and enable rate limiting
# - Backups: Configure automated database backup strategy
